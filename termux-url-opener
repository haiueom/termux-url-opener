#!/bin/bash

url=$1

green='\e[1;32m'
cyan='\e[1;36m'
white='\e[1;37m'
reset='\e[0m'

printf "\n%s[*]%s Termux Downloader%s" "$cyan" "$white" "$reset"
printf "%s[!]%s URL: %s%s%s" "$cyan" "$white" "$green" "$url" "$reset"
printf "%s[!]%s Available Options%s" "$cyan" "$white" "$reset"
printf "%s%s%s" "$white" "  1: Download mp4 (video)" "$reset"
printf "%s%s%s" "$white" "  2: Download mkv (video)" "$reset"
printf "%s%s%s" "$white" "  3: Download mp3 (audio)" "$reset"
printf "%s%s%s" "$white" "  4: Download mp4 & mp3" "$reset"
printf "%s%s%s" "$white" "  5: Download mkv & mp3" "$reset"
printf "%s%s%s" "$white" "  6: Download with wget" "$reset"
printf "%s%s%s" "$white" "  x: Exit" "$reset"
printf "%s[*]%s Choose an option: " "$cyan" "$white"

read -r option

case $option in
    1)
        yt-dlp -f 'bv[height<=?1080]+ba/b' --merge-output-format 'mp4' "$url"
    ;;
    2)
        yt-dlp -f 'bv[height<=?1080]+ba/b' --merge-output-format 'mkv' "$url"
    ;;
    3)
        yt-dlp -f 'ba' -x --audio-format --audio-quality 0 'mp3' "$url"
    ;;
    4)
        yt-dlp -f 'bv[height<=?1080]+ba/b' --merge-output-format 'mp4' "$url"
        yt-dlp -f 'ba' -x --audio-format --audio-quality 0 'mp3' "$url"
    ;;
    5)
        yt-dlp -f 'bv[height<=?1080]+ba/b' --merge-output-format 'mkv' "$url"
        yt-dlp -f 'ba' -x --audio-format --audio-quality 0 'mp3' "$url"
    ;;
    6)
        [ -d "$HOME/storage/downloads/termux/wget" ] || mkdir "$HOME/storage/downloads/termux/wget"
        cd "$HOME/storage/downloads/termux/wget" || exit
        wget "$url"
    ;;
    x)
        echo "bye . . ."
    ;;
esac
